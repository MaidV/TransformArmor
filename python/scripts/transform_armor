#!/usr/bin/env python3
import sys
import json

from PyQt5.QtWidgets import QTreeWidget, QTreeWidgetItem, QApplication, QWidget
if __name__ == '__main__':
    app = QApplication(sys.argv)
    with open('TransformUtils_Armors_Dump.json', 'r') as f:
        data = json.load(f)

    rows = []
    for mod in sorted(data.keys(), key=str.lower):
        row = QTreeWidgetItem([mod, ""])

        for form in sorted(data[mod].keys(), key=str.lower):
            record = data[mod][form]
            if 32 not in record['slots']:
                continue
            armorname = QTreeWidgetItem([record['name'] + ' (' + record['formID'] + ')', ""])
            armortype = QTreeWidgetItem(['ArmorType', record['type']])
            enchanted = QTreeWidgetItem(['Enchanted', str(record['enchanted'])])
            armorslots = QTreeWidgetItem(['Slots', str(record['slots'])])
            
            armorname.addChild(armortype)
            armorname.addChild(enchanted)
            armorname.addChild(armorslots)
            row.addChild(armorname)
        
        if row.childCount():
            rows.append(row)

    w = QWidget()
    w.resize(1024, 768)

    tw = QTreeWidget(w)
    tw.resize(1024, 768)
    tw.setColumnCount(2)
    tw.setHeaderLabels(["", "Value"])
    for row in rows:
        tw.addTopLevelItem(row)

    w.show()
    sys.exit(app.exec_())
